# TCP Server-Client Map Generation Game

## 项目简介

这个项目是一个简单的基于C++的客户端-服务器程序，使用Perlin噪声算法生成一个100x100的地图，并通过TCP协议在客户端与服务器之间传输地图数据和玩家位置。玩家可以通过键盘输入（W/A/S/D）控制虚拟人物在地图中的移动，服务器将根据玩家的输入更新位置并回传给客户端。

### 功能简介
- **地图生成**：服务器端使用Perlin噪声生成一个100x100的地图，地形分为水域、陆地和山脉。
- **客户端控制**：玩家通过W/A/S/D键来控制虚拟人物在地图上的移动，客户端实时向服务器发送移动命令。
- **实时位置更新**：服务器处理玩家的输入并返回新的玩家坐标，客户端显示当前玩家的位置。

## 技术栈

- **C++**：用于实现客户端和服务器端程序。
- **Winsock2**：用于实现Windows平台上的TCP网络通信。
- **Perlin噪声**：用于生成平滑的伪随机地图地形。

## 运行步骤

### 环境准备

1. **编译工具**：需要安装支持C++的编译工具（如MinGW、Visual Studio等）。
2. **Windows平台**：此项目使用了Windows套接字（Winsock2），因此只能在Windows平台上运行。

### 编译

1. **服务器端**：
    ```bash
    g++ Server.cpp -o server -lws2_32
    ```

2. **客户端**：
    ```bash
    g++ Client.cpp -o client -lws2_32
    ```

### 运行

1. 启动服务器：
    ```bash
    ./server.exe
    ```

2. 启动客户端：
    ```bash
    ./client.exe
    ```

3. 在客户端输入`W`, `A`, `S`, `D`来控制玩家的移动。
    - `W`：上
    - `A`：左
    - `S`：下
    - `D`：右

4. 玩家按键控制后，客户端会接收到服务器返回的新位置，并在控制台上显示玩家的位置。

5. 输入`Q`退出客户端。

### 网络通信

- **客户端与服务器**通过TCP协议进行通信。
- 服务器会首先发送整个地图数据到客户端，并在后续处理玩家的输入和坐标更新。
- **客户端**会发送玩家的移动命令（W/A/S/D）到服务器，服务器处理后回传新的坐标。

## 代码结构

- **Server.cpp**：实现了服务器端逻辑，包括地图生成、玩家控制、位置更新和数据通信。
- **Client.cpp**：实现了客户端逻辑，包括接收和发送玩家的移动命令、接收地图数据和显示地图及玩家位置。

## 常见问题

1. **无法连接到服务器**：
   - 请确保服务器已启动并在正确的端口（23456）监听。
   - 确保防火墙允许TCP通信。

2. **客户端输入无反应**：
   - 确保客户端与服务器之间的网络连接正常。
   - 检查输入的命令是否正确（`W`, `A`, `S`, `D`）。

## 许可证

此项目遵循MIT许可证。请随意使用和修改代码，前提是包含原作者信息。

## 作者

- 项目由 东北大学软件学院张乐超 编写。
